{"version":3,"sources":["webpack:///./src/views/order/OrderDetail.vue","webpack:///./node_modules/vant/es/dialog/function-call.js","webpack:///./node_modules/vant/es/action-bar/ActionBar.js","webpack:///./node_modules/vant/es/action-bar/index.js","webpack:///./node_modules/vant/es/action-bar-button/ActionBarButton.js","webpack:///./node_modules/vant/es/action-bar-button/index.js","webpack:///./node_modules/vant/es/dialog/Dialog.js","webpack:///./node_modules/vant/es/dialog/index.js","webpack:///./src/views/order/OrderDetail.vue?d163","webpack:///./src/views/order/OrderDetail.vue?dc28","webpack:///./src/network/order.js"],"names":["class","style","default","statusString","detail","order_no","created_at","status","showPayFn","color","block","handleConfirmOrder","total","orderDetails","data","item","key","id","num","price","desc","title","goods","thumb","cover_url","show","showPay","position","border","column-num","text","width","height","src","aliyun","wechat","instance","bem","create","ACTION_BAR_KEY","Symbol","name","props","safeAreaInsetBottom","slots","linkChildren","useChildren","type","String","icon","loading","Boolean","disabled","route","parent","index","useParent","isFirst","prev","children","value","isLast","next","isButton","last","first","t","popupKeys","theme","message","Function","callback","allowHtml","className","transition","messageAlign","closeOnPopstate","showCancelButton","cancelButtonText","cancelButtonColor","confirmButtonText","confirmButtonColor","showConfirmButton","closeOnClickOverlay","emits","emit","confirm","cancel","updateShow","close","action","getActionHandler","beforeClose","args","onCancel","onConfirm","renderTitle","isolated","renderMessage","hasTitle","classNames","content","renderContent","renderButtons","renderRoundButtons","renderFooter","footer","initInstance","Wrapper","state","toggle","options","Promise","resolve","reject","open","currentOptions","defaultOptions","overlay","teleport","lockScroll","undefined","overlayClass","overlayStyle","alert","setDefaultOptions","resetDefaultOptions","Component","install","app","use","config","globalProperties","$dialog","components","NavBar","setup","router","orderNo","init","query","then","res","console","log","forbidClick","clear","sum","forEach","qr_code_url","timer","setInterval","clearInterval","push","path","catch","__exports__","render","createOrder","params","request","url","method","getOrderPreview","payOrder","order","payOrderStatus","getOrderList","getOrderDetail","include","confirmOrder"],"mappings":"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","file":"js/chunk-b6f94382.7010124e.js","sourcesContent":["<template>\n  <div class=\"order-detail-box\">\n    <nav-bar class=\"nav-bar\">\n      <template v-slot:default>\n        定单详情\n      </template>\n    </nav-bar>\n    <div class=\"order-status\">\n      <div class=\"status-item\">\n        <label>订单状态：</label>\n        <span>{{statusString}}</span>\n      </div>\n      <div class=\"status-item\">\n        <label>订单编号：</label>\n        <span>{{detail.order_no}}</span>\n      </div>\n      <div class=\"status-item\">\n        <label>下单时间：</label>\n        <span>{{detail.created_at}}</span>\n      </div>\n\n      <van-button v-if=\"detail.status == 1\"  @click=\"showPayFn\" style=\"margin-bottom: 10px\" color=\"#1baeae\" block>去支付</van-button>\n      <van-button v-if=\"detail.status == 2\"  @click=\"handleConfirmOrder\" block >确认订单</van-button>\n    </div>\n    <div class=\"order-price\">\n      <div class=\"price-item\">\n        <label>商品金额：</label>\n        <span>¥ {{total + '.00'}}</span>\n      </div>\n      <div class=\"price-item\">\n        <label>配送方式：</label>\n        <span>普通快递</span>\n      </div>\n    </div>\n\n    <van-card\n            v-for=\"item in detail.orderDetails.data\" :key=\"item.id\"\n          :num=\"item.num\"\n          :price=\"item.price+'.00'\"\n          desc=\"全场包邮\"\n          :title=\"item.goods.title\"\n          :thumb=\"item.goods.cover_url\"\n     />\n\n\n\n    <div style=\"width:100%;height:50px;\">\n\n    </div>\n\n    <van-popup\n      v-model:show=\"showPay\"\n      position=\"bottom\"\n      :style=\"{ height: '40%' }\"\n    >\n\n      <div :style=\"{ width: '90%', margin: '0 auto', padding: '50px 0' }\">\n        <van-grid :border=\"false\" :column-num=\"2\">\n          <van-grid-item  text=\"支付宝\">\n            支付宝二维码<br>\n            <van-image width=\"150\" height=\"150\" :src=\"aliyun\" />\n          </van-grid-item>\n          <van-grid-item text=\"微信支付\">\n            微信二维码<br>\n            <van-image width=\"150\" height=\"150\" :src=\"wechat\" />\n          </van-grid-item>\n        </van-grid>\n\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\n  import { reactive, toRefs, onMounted,computed } from 'vue'\n  import NavBar from \"components/common/navbar/NavBar\";\n  import { getOrderDetail, confirmOrder, payOrder,payOrderStatus,viewExpress } from 'network/order'\n  import { Dialog, Toast } from 'vant'\n  import { useRoute, useRouter } from 'vue-router'\n\n\n  export default {\n    name: 'OrderDetail',\n    components: {\n      NavBar\n    },\n    setup() {\n      const route = useRoute()\n      const router = useRouter()\n      const state = reactive({\n          orderNo:'',  // 定单ID\n          detail:{\n              orderDetails:{\n                data:[]\n              },\n              status:0\n          },\n          showPay:false,\n          aliyun:'',\n          wechat:''\n      })\n\n      const init = () =>{\n         const {id} =  route.query;\n         state.orderNo = id;\n\n          getOrderDetail(id).then(res=>{\n            console.log(res);\n            state.detail = res;\n          })\n\n      }\n\n      onMounted(() => {\n          Toast.loading({message:'加载中...', forbidClick:true});\n          init();\n          Toast.clear();\n      })\n\n      const statusString = computed(()=>{\n        // 1下单 2支付 3发货 4收货 5过期\n        let status = ['', '已下单', '已支付', '等待发货', '确认收货', '已过期'];\n\n        return status[state.detail.status];\n      })\n\n      const total = computed(()=>{\n          let sum = 0;\n\n          state.detail.orderDetails.data.forEach(item=>{\n              sum += item.num * item.price;\n          })\n\n          return sum;\n      })\n\n      const showPayFn = () =>{\n          state.showPay = true;\n\n          payOrder(state.orderNo, {type:'aliyun'}).then(res=>{\n            state.aliyun = res.qr_code_url;\n            state.wechat = res.qr_code_url;\n          })\n\n          // 轮询查看\n          const timer = setInterval(()=>{\n            payOrderStatus(state.orderNo).then(res=>{\n\n              console.log(res);\n              if(res == '2') {\n                clearInterval(timer);\n                state.showPay = false;\n                router.push({path:'/orderdetail', query:{id:state.orderNo}})\n              }\n\n            })\n          }, 2000)\n\n      }\n\n      const handleConfirmOrder = ()=>{\n        Dialog.confirm({\n          title:'是否确认订单'\n        }).then(()=>{\n          confirmOrder(state.orderNo).then(res=>{\n\n              Toast('确认成功');\n              init();\n\n\n          })\n        }).catch(()=>{\n\n        })\n    }\n\n      const close = () =>{\n        Dialog.close();\n      }\n\n      return {\n        ...toRefs(state),\n        statusString,\n        total,\n        showPayFn,\n        handleConfirmOrder,\n        close\n      }\n\n\n\n\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .order-detail-box {\n    text-align: left;\n    background: #f7f7f7;\n    .order-status {\n      background: #fff;\n      margin-top: 44px;\n      padding: 20px;\n      font-size: 15px;\n      .status-item {\n        margin-bottom: 10px;\n        label {\n          color: #999;\n        }\n        span {\n\n        }\n      }\n    }\n    .order-price {\n      background: #fff;\n      margin: 20px 0;\n      padding: 20px;\n      font-size: 15px;\n      .price-item {\n        margin-bottom: 10px;\n        label {\n          color: #999;\n        }\n        span {\n\n        }\n      }\n    }\n    .van-card {\n      margin-top: 0;\n    }\n    .van-card__content {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n  }\n</style>\n","import { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport { extend, inBrowser, withInstall } from '../utils';\nimport { mountComponent, usePopupState } from '../utils/mount-component';\nimport VanDialog from './Dialog';\nvar instance;\n\nfunction initInstance() {\n  var Wrapper = {\n    setup() {\n      var {\n        state,\n        toggle\n      } = usePopupState();\n      return () => _createVNode(VanDialog, _mergeProps(state, {\n        \"onUpdate:show\": toggle\n      }), null);\n    }\n\n  };\n  ({\n    instance\n  } = mountComponent(Wrapper));\n}\n\nfunction Dialog(options) {\n  /* istanbul ignore if */\n  if (!inBrowser) {\n    return Promise.resolve();\n  }\n\n  return new Promise((resolve, reject) => {\n    if (!instance) {\n      initInstance();\n    }\n\n    instance.open(extend({}, Dialog.currentOptions, options, {\n      callback: action => {\n        (action === 'confirm' ? resolve : reject)(action);\n      }\n    }));\n  });\n}\n\nDialog.defaultOptions = {\n  title: '',\n  width: '',\n  theme: null,\n  message: '',\n  overlay: true,\n  callback: null,\n  teleport: 'body',\n  className: '',\n  allowHtml: false,\n  lockScroll: true,\n  transition: undefined,\n  beforeClose: null,\n  overlayClass: '',\n  overlayStyle: undefined,\n  messageAlign: '',\n  cancelButtonText: '',\n  cancelButtonColor: null,\n  confirmButtonText: '',\n  confirmButtonColor: null,\n  showConfirmButton: true,\n  showCancelButton: false,\n  closeOnPopstate: true,\n  closeOnClickOverlay: false\n};\nDialog.currentOptions = extend({}, Dialog.defaultOptions);\nDialog.alert = Dialog;\n\nDialog.confirm = options => Dialog(extend({\n  showCancelButton: true\n}, options));\n\nDialog.close = () => {\n  if (instance) {\n    instance.toggle(false);\n  }\n};\n\nDialog.setDefaultOptions = options => {\n  extend(Dialog.currentOptions, options);\n};\n\nDialog.resetDefaultOptions = () => {\n  Dialog.currentOptions = extend({}, Dialog.defaultOptions);\n};\n\nDialog.Component = withInstall(VanDialog);\n\nDialog.install = app => {\n  app.use(Dialog.Component);\n  app.config.globalProperties.$dialog = Dialog;\n};\n\nexport { Dialog };","import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from 'vue';\nimport { truthProp, createNamespace } from '../utils';\nimport { useChildren } from '@vant/use';\nvar [name, bem] = createNamespace('action-bar');\nexport var ACTION_BAR_KEY = Symbol(name);\nexport default defineComponent({\n  name,\n  props: {\n    safeAreaInsetBottom: truthProp\n  },\n\n  setup(props, {\n    slots\n  }) {\n    var {\n      linkChildren\n    } = useChildren(ACTION_BAR_KEY);\n    linkChildren();\n    return () => _createVNode(\"div\", {\n      \"class\": [bem(), {\n        'van-safe-area-bottom': props.safeAreaInsetBottom\n      }]\n    }, [slots.default == null ? void 0 : slots.default()]);\n  }\n\n});","import { withInstall } from '../utils';\nimport _ActionBar from './ActionBar';\nexport var ActionBar = withInstall(_ActionBar);\nexport default ActionBar;","import { createVNode as _createVNode } from \"vue\";\nimport { computed, defineComponent } from 'vue';\nimport { extend, createNamespace } from '../utils';\nimport { ACTION_BAR_KEY } from '../action-bar/ActionBar'; // Composables\n\nimport { useParent } from '@vant/use';\nimport { useExpose } from '../composables/use-expose';\nimport { useRoute, routeProps } from '../composables/use-route'; // Components\n\nimport { Button } from '../button';\nvar [name, bem] = createNamespace('action-bar-button');\nexport default defineComponent({\n  name,\n  props: extend({}, routeProps, {\n    type: String,\n    text: String,\n    icon: String,\n    color: String,\n    loading: Boolean,\n    disabled: Boolean\n  }),\n\n  setup(props, {\n    slots\n  }) {\n    var route = useRoute();\n    var {\n      parent,\n      index\n    } = useParent(ACTION_BAR_KEY);\n    var isFirst = computed(() => {\n      if (parent) {\n        var prev = parent.children[index.value - 1];\n        return !(prev && 'isButton' in prev);\n      }\n    });\n    var isLast = computed(() => {\n      if (parent) {\n        var next = parent.children[index.value + 1];\n        return !(next && 'isButton' in next);\n      }\n    });\n    useExpose({\n      isButton: true\n    });\n    return () => {\n      var {\n        type,\n        icon,\n        text,\n        color,\n        loading,\n        disabled\n      } = props;\n      return _createVNode(Button, {\n        \"class\": bem([type, {\n          last: isLast.value,\n          first: isFirst.value\n        }]),\n        \"size\": \"large\",\n        \"type\": type,\n        \"icon\": icon,\n        \"color\": color,\n        \"loading\": loading,\n        \"disabled\": disabled,\n        \"onClick\": route\n      }, {\n        default: () => [slots.default ? slots.default() : text]\n      });\n    };\n  }\n\n});","import { withInstall } from '../utils';\nimport _ActionBarButton from './ActionBarButton';\nexport var ActionBarButton = withInstall(_ActionBarButton);\nexport default ActionBarButton;","import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport { reactive, defineComponent } from 'vue'; // Utils\n\nimport { pick, extend, addUnit, truthProp, isFunction, BORDER_TOP, BORDER_LEFT, unknownProp, numericProp, makeStringProp, callInterceptor, createNamespace } from '../utils';\nimport { popupSharedProps, popupSharedPropKeys } from '../popup/shared'; // Components\n\nimport { Popup } from '../popup';\nimport { Button } from '../button';\nimport { ActionBar } from '../action-bar';\nimport { ActionBarButton } from '../action-bar-button'; // Types\n\nvar [name, bem, t] = createNamespace('dialog');\nvar popupKeys = [...popupSharedPropKeys, 'transition', 'closeOnPopstate'];\nexport default defineComponent({\n  name,\n  props: extend({}, popupSharedProps, {\n    title: String,\n    theme: String,\n    width: numericProp,\n    message: [String, Function],\n    callback: Function,\n    allowHtml: Boolean,\n    className: unknownProp,\n    transition: makeStringProp('van-dialog-bounce'),\n    messageAlign: String,\n    closeOnPopstate: truthProp,\n    showCancelButton: Boolean,\n    cancelButtonText: String,\n    cancelButtonColor: String,\n    confirmButtonText: String,\n    confirmButtonColor: String,\n    showConfirmButton: truthProp,\n    closeOnClickOverlay: Boolean\n  }),\n  emits: ['confirm', 'cancel', 'update:show'],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    var loading = reactive({\n      confirm: false,\n      cancel: false\n    });\n\n    var updateShow = value => emit('update:show', value);\n\n    var close = action => {\n      updateShow(false);\n      props.callback == null ? void 0 : props.callback(action);\n    };\n\n    var getActionHandler = action => () => {\n      // should not trigger close event when hidden\n      if (!props.show) {\n        return;\n      }\n\n      emit(action);\n\n      if (props.beforeClose) {\n        loading[action] = true;\n        callInterceptor(props.beforeClose, {\n          args: [action],\n\n          done() {\n            close(action);\n            loading[action] = false;\n          },\n\n          canceled() {\n            loading[action] = false;\n          }\n\n        });\n      } else {\n        close(action);\n      }\n    };\n\n    var onCancel = getActionHandler('cancel');\n    var onConfirm = getActionHandler('confirm');\n\n    var renderTitle = () => {\n      var title = slots.title ? slots.title() : props.title;\n\n      if (title) {\n        return _createVNode(\"div\", {\n          \"class\": bem('header', {\n            isolated: !props.message && !slots.default\n          })\n        }, [title]);\n      }\n    };\n\n    var renderMessage = hasTitle => {\n      var {\n        message,\n        allowHtml,\n        messageAlign\n      } = props;\n      var classNames = bem('message', {\n        'has-title': hasTitle,\n        [messageAlign]: messageAlign\n      });\n      var content = isFunction(message) ? message() : message;\n\n      if (allowHtml && typeof content === 'string') {\n        return _createVNode(\"div\", {\n          \"class\": classNames,\n          \"innerHTML\": content\n        }, null);\n      }\n\n      return _createVNode(\"div\", {\n        \"class\": classNames\n      }, [content]);\n    };\n\n    var renderContent = () => {\n      if (slots.default) {\n        return _createVNode(\"div\", {\n          \"class\": bem('content')\n        }, [slots.default()]);\n      }\n\n      var {\n        title,\n        message,\n        allowHtml\n      } = props;\n\n      if (message) {\n        var hasTitle = !!(title || slots.title);\n        return _createVNode(\"div\", {\n          \"key\": allowHtml ? 1 : 0,\n          \"class\": bem('content', {\n            isolated: !hasTitle\n          })\n        }, [renderMessage(hasTitle)]);\n      }\n    };\n\n    var renderButtons = () => _createVNode(\"div\", {\n      \"class\": [BORDER_TOP, bem('footer')]\n    }, [props.showCancelButton && _createVNode(Button, {\n      \"size\": \"large\",\n      \"text\": props.cancelButtonText || t('cancel'),\n      \"class\": bem('cancel'),\n      \"style\": {\n        color: props.cancelButtonColor\n      },\n      \"loading\": loading.cancel,\n      \"onClick\": onCancel\n    }, null), props.showConfirmButton && _createVNode(Button, {\n      \"size\": \"large\",\n      \"text\": props.confirmButtonText || t('confirm'),\n      \"class\": [bem('confirm'), {\n        [BORDER_LEFT]: props.showCancelButton\n      }],\n      \"style\": {\n        color: props.confirmButtonColor\n      },\n      \"loading\": loading.confirm,\n      \"onClick\": onConfirm\n    }, null)]);\n\n    var renderRoundButtons = () => _createVNode(ActionBar, {\n      \"class\": bem('footer')\n    }, {\n      default: () => [props.showCancelButton && _createVNode(ActionBarButton, {\n        \"type\": \"warning\",\n        \"text\": props.cancelButtonText || t('cancel'),\n        \"class\": bem('cancel'),\n        \"color\": props.cancelButtonColor,\n        \"loading\": loading.cancel,\n        \"onClick\": onCancel\n      }, null), props.showConfirmButton && _createVNode(ActionBarButton, {\n        \"type\": \"danger\",\n        \"text\": props.confirmButtonText || t('confirm'),\n        \"class\": bem('confirm'),\n        \"color\": props.confirmButtonColor,\n        \"loading\": loading.confirm,\n        \"onClick\": onConfirm\n      }, null)]\n    });\n\n    var renderFooter = () => {\n      if (slots.footer) {\n        return slots.footer();\n      }\n\n      return props.theme === 'round-button' ? renderRoundButtons() : renderButtons();\n    };\n\n    return () => {\n      var {\n        width,\n        title,\n        theme,\n        message,\n        className\n      } = props;\n      return _createVNode(Popup, _mergeProps({\n        \"role\": \"dialog\",\n        \"class\": [bem([theme]), className],\n        \"style\": {\n          width: addUnit(width)\n        },\n        \"aria-labelledby\": title || message,\n        \"onUpdate:show\": updateShow\n      }, pick(props, popupKeys)), {\n        default: () => [renderTitle(), renderContent(), renderFooter()]\n      });\n    };\n  }\n\n});","import { Dialog } from './function-call';\nexport default Dialog;\nexport { Dialog };","import { render } from \"./OrderDetail.vue?vue&type=template&id=03435415&scoped=true\"\nimport script from \"./OrderDetail.vue?vue&type=script&lang=js\"\nexport * from \"./OrderDetail.vue?vue&type=script&lang=js\"\n\nimport \"./OrderDetail.vue?vue&type=style&index=0&id=03435415&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zmj/Desktop/H5/vue-mobile/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-03435415\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OrderDetail.vue?vue&type=style&index=0&id=03435415&lang=scss&scoped=true\"","import {request} from './request';\r\n\r\n// 创建定单\r\nexport function createOrder(params) {\r\n    return request({\r\n        url:'/api/orders',\r\n        method: 'post',\r\n        params\r\n    })\r\n}\r\n\r\n// 获取定单预览\r\nexport function getOrderPreview() {\r\n    return request({\r\n        url:'/api/orders/preview'\r\n    })\r\n}\r\n\r\n// 定单支付, 获取二维\r\nexport function payOrder(order, params) {\r\n    return request({\r\n        url:`/api/orders/${order}/pay`,\r\n        params\r\n    })\r\n}\r\n\r\n// 定单状态\r\nexport function payOrderStatus(order) {\r\n    return request({\r\n        url:`/api/orders/${order}/status`\r\n    })\r\n}\r\n\r\n// 获取定单列表 {page:1, status:2, include:'user,orderDetail.goods'}\r\nexport function getOrderList(params) {\r\n    return request({\r\n        url:'/api/orders',\r\n        method: 'get',\r\n        params\r\n    })\r\n}\r\n\r\n// 定单详情\r\nexport function getOrderDetail(order) {\r\n    return request({\r\n        url:`/api/orders/${order}`,\r\n        params: {\r\n            include:'user,orderDetails.goods'\r\n        }\r\n    })\r\n}\r\n\r\n// 确认定单\r\nexport function confirmOrder(order) {\r\n    return request({\r\n        url:`/api/orders/${order}/confirm`,\r\n        method: 'patch'\r\n    })\r\n}\r\n\r\n// 获取物流信息 /api/orders/{order}/express\r\nexport function viewExpress(order) {\r\n    return request({\r\n        url:`/api/orders/${order}/express`\r\n    })\r\n}"],"sourceRoot":""}